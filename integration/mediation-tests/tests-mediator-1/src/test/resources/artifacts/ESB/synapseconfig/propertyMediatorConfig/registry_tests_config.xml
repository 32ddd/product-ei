<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://ws.apache.org/ns/synapse">

    <proxy name="conf_registry_test" transports="http,https">
        <target>
            <inSequence>
                <switch xmlns:m0="http://services.samples" source="//m0:getQuote/m0:request/m0:symbol">
                    <default>
                        <property xmlns="http://ws.apache.org/ns/synapse" name="confVal" expression="get-property('registry', 'conf:/custom/test/property_mediator_test.txt/@resourceName')"  scope="default" type="STRING" />
                    </default>
                </switch>
                <log level="custom">
                    <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="symbol" expression="get-property('confVal')" />
                </log>
                <send>
                    <endpoint>
                        <address uri="http://localhost:9000/services/SimpleStockQuoteService" />
                    </endpoint>
                </send>
            </inSequence>
            <outSequence>
                <send/>
            </outSequence>
        </target>
    </proxy>

    <proxy name="gov_registry_test" transports="http,https">
        <target>
            <inSequence>
                <switch xmlns:m0="http://services.samples" source="//m0:getQuote/m0:request/m0:symbol">
                    <default>
                        <property xmlns="http://ws.apache.org/ns/synapse" name="govVal" expression="get-property('registry', 'gov:/custom/test/property_mediator_test.txt/@resourceName')"  scope="default" type="STRING" />
                    </default>
                </switch>
                <log level="custom">
                    <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="symbol" expression="get-property('govVal')" />
                </log>
                <send>
                    <endpoint>
                        <address uri="http://localhost:9000/services/SimpleStockQuoteService" />
                    </endpoint>
                </send>
            </inSequence>
            <outSequence>
                <send/>
            </outSequence>
        </target>
    </proxy>

</definitions>