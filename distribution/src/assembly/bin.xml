<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2017, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
  ~
  ~ WSO2 Inc. licenses this file to you under the Apache License,
  ~ Version 2.0 (the "License"); you may not use this file except
  ~ in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied. See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->
<assembly>
    <includeBaseDirectory>true</includeBaseDirectory>
    <baseDirectory>wso2ei-${pom.version}</baseDirectory>
    <id>wso2ei-dist</id>
    <formats>
        <format>zip</format>
    </formats>
    <fileSets>
        <fileSet>
            <directory>target/WSO2Carbon</directory>
            <outputDirectory></outputDirectory>
            <fileMode>644</fileMode>
            <excludes>
                <exclude>**/*.lock</exclude>
                <exclude>**/.data</exclude>
                <exclude>**/.settings</exclude>
                <exclude>libcairo-swt.so</exclude>
                <exclude>eclipse</exclude>
                <exclude>**/*.sh</exclude>
                <exclude>**/native/*</exclude>
                <exclude>**/carbon.bat</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>target/WSO2Carbon</directory>
            <outputDirectory></outputDirectory>
            <includes>
                <include>**/*.sh</include>
                <include>**/native/*</include>
            </includes>
            <excludes>
            <exclude>**/carbon.sh</exclude>
            </excludes>
            <fileMode>755</fileMode>
        </fileSet>
        <!--Ballerina related:start-->
        <fileSet>
            <directory>src/conf/ballerina</directory>
            <outputDirectory>wso2/ballerina/bre/conf</outputDirectory>
            <fileMode>644</fileMode>
        </fileSet>
        <!--<fileSet>-->
            <!--<directory>src/conf/ballerina</directory>-->
            <!--<outputDirectory>wso2/ballerina/resources/composer/services</outputDirectory>-->
            <!--<fileMode>644</fileMode>-->
        <!--</fileSet>-->
        <fileSet>
            <directory>src/ballerina/logs</directory>
            <outputDirectory>wso2/ballerina/logs</outputDirectory>
            <fileMode>644</fileMode>
        </fileSet>
        <fileSet>
            <directory>
                target/ballerina/ballerina-builtin-jar/META-INF/ballerina
            </directory>
            <outputDirectory>wso2/ballerina/src</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>
                target/ballerina/extracted-distributions/ballerina-http-jar/META-INF/natives
            </directory>
            <outputDirectory>wso2/ballerina/src</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>
                src/ballerina/security
            </directory>
            <outputDirectory>wso2/ballerina/bre/security</outputDirectory>
        <fileMode>644</fileMode>
        </fileSet>
        <!--<fileSet>-->
            <!--<directory>-->
                <!--target/WSO2Carbon/tmp/ballerina-composer-web-zip/ballerina-composer-web-${ballerina.runtime.version}-->
            <!--</directory>-->
            <!--<outputDirectory>wso2/ballerina</outputDirectory>-->
        <!--</fileSet>-->
        <!--Ballerina related:end-->
        <fileSet>
            <directory>carbon-home</directory>
            <outputDirectory></outputDirectory>
            <includes>
                <include>**/*.html</include>
                <include>**/*.txt</include>
            </includes>
            <fileMode>644</fileMode>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <directory>target/WSO2Carbon</directory>
            <outputDirectory>/deployment</outputDirectory>
            <excludes>
                <exclude>**/*</exclude>
            </excludes>
        </fileSet>
    </fileSets>

    <files>
        <!--Ballerina related: start-->
        <file>
            <source>target/ballerina/ballerina-logging-jar/logging.properties</source>
            <outputDirectory>wso2/ballerina/bre/conf/</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/ballerina/bin/ballerina</source>
            <outputDirectory>wso2/ballerina/bin/</outputDirectory>
            <fileMode>755</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/ballerina/bin/ballerina.bat</source>
            <outputDirectory>wso2/ballerina/bin/</outputDirectory>
            <fileMode>755</fileMode>
            <filtered>true</filtered>
        </file>
        <!--<file>-->
            <!--<source>src/ballerina/bin/composer</source>-->
            <!--<outputDirectory>wso2/ballerina/bin/</outputDirectory>-->
            <!--<fileMode>755</fileMode>-->
            <!--<filtered>true</filtered>-->
        <!--</file>-->
        <!--<file>-->
            <!--<source>src/ballerina/bin/composer.bat</source>-->
            <!--<outputDirectory>wso2/ballerina/bin/</outputDirectory>-->
            <!--<fileMode>755</fileMode>-->
            <!--<filtered>true</filtered>-->
        <!--</file>-->
        <file>
            <source>src/ballerina/bin/version.txt</source>
            <outputDirectory>wso2/ballerina/bin/</outputDirectory>
            <fileMode>755</fileMode>
            <filtered>true</filtered>
        </file>
        <!--<file>-->
            <!--<source>src/scripts/ballerina.sh</source>-->
            <!--<outputDirectory>bin/</outputDirectory>-->
            <!--<fileMode>755</fileMode>-->
            <!--<filtered>true</filtered>-->
        <!--</file>-->
        <!--<file>-->
            <!--<source>src/scripts/ballerina.bat</source>-->
            <!--<outputDirectory>bin/</outputDirectory>-->
            <!--<fileMode>755</fileMode>-->
            <!--<filtered>true</filtered>-->
        <!--</file>-->
        <!--<file>-->
            <!--<source>src/scripts/composer.bat</source>-->
            <!--<outputDirectory>bin/</outputDirectory>-->
            <!--<fileMode>755</fileMode>-->
            <!--<filtered>true</filtered>-->
        <!--</file>-->
        <!--<file>-->
            <!--<source>src/scripts/composer.sh</source>-->
            <!--<outputDirectory>bin/</outputDirectory>-->
            <!--<filtered>true</filtered>-->
            <!--<fileMode>755</fileMode>-->
        <!--</file>-->
        <!--<file>-->
            <!--<source>src/conf/composer/composer-logging.properties</source>-->
            <!--<outputDirectory>wso2/ballerina/bre/conf</outputDirectory>-->
            <!--<filtered>true</filtered>-->
            <!--<fileMode>644</fileMode>-->
        <!--</file>-->
        <!--<file>-->
            <!--<source>-->
                <!--target/WSO2Carbon/tmp/workspace-service-jar/deployment.yaml-->
            <!--</source>-->
            <!--<outputDirectory>wso2/ballerina/resources/composer/services</outputDirectory>-->
            <!--<filtered>true</filtered>-->
            <!--<fileMode>644</fileMode>-->
        <!--</file>-->
        <file>
            <source>src/ballerina/LICENSE.txt</source>
            <outputDirectory>wso2/ballerina/</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/ballerina/copyright.txt</source>
            <outputDirectory>wso2/ballerina/</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <file>
            <source>src/ballerina/README.txt</source>
            <outputDirectory>wso2/ballerina/</outputDirectory>
            <filtered>true</filtered>
            <fileMode>644</fileMode>
        </file>
        <!--Ballerina related: end-->
        <file>
            <source>src/scripts/broker.sh</source>
            <outputDirectory>bin/</outputDirectory>
            <fileMode>755</fileMode>
            <filtered>true</filtered>
        </file>
        <!--<file>-->
            <!--<source>src/conf/broker/deployment.yaml</source>-->
            <!--<outputDirectory>conf/broker/</outputDirectory>-->
            <!--<fileMode>644</fileMode>-->
            <!--<filtered>true</filtered>-->
        <!--</file>-->
    </files>
    <dependencySets>
        <dependencySet>
            <outputDirectory>wso2/ballerina/bre/lib</outputDirectory>
            <scope>runtime</scope>
            <includes>
                <include>org.ballerinalang:ballerina-config:jar</include>
                <include>org.ballerinalang:ballerina-core:jar</include>
                <include>org.ballerinalang:ballerina-lang:jar</include>
                <include>org.ballerinalang:ballerina-launcher:jar</include>
                <include>org.ballerinalang:ballerina-builtin:jar</include>
                <include>org.ballerinalang:ballerina-logging:jar</include>
                <include>org.ballerinalang:ballerina-http:jar</include>
                <include>org.wso2.orbit.org.antlr:antlr4-runtime</include>
                <include>org.wso2.carbon.transport:org.wso2.carbon.transport.http.netty</include>
                <include>org.wso2.carbon.messaging:org.wso2.carbon.messaging</include>
                <include>org.wso2.orbit.net.sf.saxon:Saxon-HE</include>
                <include>com.fasterxml.jackson.core:jackson-databind</include>
                <include>com.fasterxml.jackson.core:jackson-core</include>
                <include>com.fasterxml.jackson.core:jackson-annotations</include>
                <include>org.apache.ws.commons.axiom:axiom-api</include>
                <include>org.apache.ws.commons.axiom:axiom-impl</include>
                <include>org.apache.ws.commons.axiom:axiom-dom</include>
                <include>jaxen:jaxen</include>
                <include>org.apache.geronimo.specs:geronimo-activation_1.1_spec</include>
                <include>org.apache.geronimo.specs:geronimo-stax-api_1.0_spec</include>
                <include>org.apache.james:apache-mime4j-core</include>
                <include>com.beust:jcommander</include>
                <include>org.slf4j:slf4j-api</include>
                <include>org.slf4j:slf4j-jdk14</include>
                <include>io.netty:netty-common</include>
                <include>io.netty:netty-buffer</include>
                <include>io.netty:netty-transport</include>
                <include>io.netty:netty-handler</include>
                <include>io.netty:netty-codec</include>
                <include>io.netty:netty-codec-http</include>
                <include>io.netty:netty-codec-http2</include>
                <include>io.netty:netty-resolver</include>
                <include>commons-pool.wso2:commons-pool</include>
                <include>org.apache.commons:commons-pool2</include>
                <include>org.wso2.orbit.org.yaml:snakeyaml</include>
                <include>commons-logging:commons-logging</include>
                <include>org.wso2.staxon:staxon-core</include>
                <include>org.apache.commons:commons-lang3</include>
                <include>javax.websocket:javax.websocket-api</include>
                <include>org.wso2.carbon:org.wso2.carbon.core:jar</include>
                <include>com.zaxxer:HikariCP</include>
                <include>javax.transaction:fjavax.transaction-api</include>
                <include>org.atomikos.wso2:atomikos</include>
                <include>org.quartz-scheduler:quartz</include>
                <include>org.quartz-scheduler:quartz-jobs</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <outputDirectory>wso2/lib/plugins</outputDirectory>
            <scope>runtime</scope>
            <includes>
                <include>org.ballerinalang:ballerina-core:jar</include>
                <include>org.ballerinalang:ballerina-lang:jar</include>
            </includes>
        </dependencySet>
        <!-- Composer specific artifacts -->
        <!--<dependencySet>-->
            <!--<outputDirectory>wso2/ballerina/resources/composer/services</outputDirectory>-->
            <!--<includes>-->
                <!--<include>org.ballerinalang:workspace-service:jar</include>-->
            <!--</includes>-->
        <!--</dependencySet>-->
    </dependencySets>
</assembly>
